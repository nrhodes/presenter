<HTML>
<HEAD>
<script type="text/javascript"
    src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>

<script>
    window['__onGCastApiAvailable'] = function(isAvailable) {
      if (isAvailable) {
          initializeCastApi();
      }
    };
    
    initializeCastApi = function() {
      cast.framework.CastContext.getInstance().setOptions({
          receiverApplicationId: "0B0596D7",
          autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
      });
    };

    loadButtonClicked = function() {
      var castSession = cast.framework.CastContext.getInstance().getCurrentSession();
      if (!castSession) {
          console.log('no chromecast session');
          return;
      }

      //var mediaInfo = new chrome.cast.media.MediaInfo("https://nrhodes.github.io/presenter/headshot.jpg", "image/jpeg");
      var mediaInfo = new chrome.cast.media.MediaInfo("https://nrhodes.github.io/presenter/headshot.jpg", "image/jpeg");
      var request = new chrome.cast.media.LoadRequest(mediaInfo);
      castSession.loadMedia(request).then(
                function() { console.log('Load succeed'); },
                  function(errorCode) { console.log('Error code: ' + errorCode); });
    }



</script>

</HEAD>
<BODY>
Sender
<BR>
<button is="google-cast-button">cast button</button>
<BR>
<button onclick="loadButtonClicked()">load</button>
</BODY>
</HTML
